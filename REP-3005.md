```
REP: 3005
Title: Game Item Profile (game_item_v1)
Author: C. Donnachie
Status: Draft
Type: Standard
Created: 2026-01-24
Requires: REP-3001
License: MIT
Original: RIP-GLYPH-0006
```

## Abstract

Defines a standard `app` profile for `type="game_item"` assets, enabling interoperable inventories,
marketplaces, and game engines.

## Motivation

Game developers need a standardized format for on-chain game items to enable interoperability between games, marketplaces, and wallets. This profile provides that standard.

## Specification

### Compatibility

This profile inherits Glyph v2 envelope rules while preserving the existing magic:

- Magic ASCII: `gly`
- Magic hex: `676c79`
- v2 payloads begin with version byte `0x02`

### Profile Identifier

`app.namespace = "rxd.game"`  
`app.schema = "game_item_v1"`

#### Versioning Strategy

Future versions (e.g., `game_item_v2`) SHOULD:

- Use a new schema identifier: `app.schema = "game_item_v2"`
- Maintain backwards compatibility where possible
- Document migration paths from previous versions
- Coexist with older versions (indexers index both)

---

### Required Fields

`app.data.base` MUST include:

- `item_id` (text): stable identifier within the namespace (≤64 bytes)
- `slot` (text): e.g. `weapon | armor | consumable | misc`
- `rarity` (text): e.g. `common | rare | epic | legendary`
- `tags` (array text): max 16 tags, each ≤32 bytes
- `stats` (map): numeric stats; values are signed 32-bit integers (int32)
- `stackable` (bool)

Optional:

- `effects` (array): see §4.1
- `equip_rules` (map): see §4.2

#### Effects Schema

Each effect in the `effects` array SHOULD include:

```json
{
  "effect_id": "fire_damage",
  "type": "damage | heal | buff | debuff | special",
  "value": 10,
  "duration": 5,
  "target": "self | enemy | ally | aoe"
}
```

#### Equip Rules Schema

The `equip_rules` map MAY include:

```json
{
  "min_level": 10,
  "class_restrict": ["warrior", "paladin"],
  "unique_equipped": true,
  "bind_on_equip": false
}
```

---

### Mutable State (Optional)

If `mutable.allowed=true`, `app.data.state` MAY be mutable.
Common fields:

- `level` (uint)
- `durability` (uint)
- `xp` (uint)
- `bound_to` (text glyphid) (soulbound-style)

Indexers SHOULD expose the latest state by following the update chain.

### Preview Recommendations

Game items SHOULD include a `preview` thumbnail for marketplace display:

- Recommended size: 256×256 or 512×512 pixels
- Recommended format: PNG with transparency or WebP
- Include `blurhash` for progressive loading

### Example

```json
{
  "v": 2,
  "type": "game_item",
  "name": "Radiant Sword",
  "created": 1760000000,
  "content": {
    "mode": "inline",
    "primary": {
      "path": "item.json",
      "mime": "application/json",
      "size": 721,
      "hash": {
        "algo": "sha256",
        "hex": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2"
      },
      "encoding": "raw",
      "compression": "none"
    },
    "files": [
      {
        "path": "icon.png",
        "mime": "image/png",
        "size": 4096,
        "hash": {
          "algo": "sha256",
          "hex": "b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3"
        },
        "encoding": "raw",
        "compression": "none"
      }
    ]
  },
  "preview": {
    "thumb": {
      "path": "icon.png",
      "mime": "image/png",
      "width": 256,
      "height": 256
    },
    "blurhash": "LEHV6nWB2yk8pyo0adR*.7kCMdnj"
  },
  "policy": { "renderable": true, "executable": false },
  "mutable": {
    "allowed": true,
    "controller": "02abc123def456abc123def456abc123def456abc123def456abc123def456abc123",
    "fields": ["app.data.state"]
  },
  "app": {
    "namespace": "rxd.game",
    "schema": "game_item_v1",
    "data": {
      "base": {
        "item_id": "sword_radiant",
        "slot": "weapon",
        "rarity": "rare",
        "tags": ["melee", "blade"],
        "stats": { "atk": 12, "crit": 2 },
        "stackable": false,
        "effects": [
          {
            "effect_id": "fire_damage",
            "type": "damage",
            "value": 5,
            "duration": 3,
            "target": "enemy"
          }
        ],
        "equip_rules": { "min_level": 5 }
      },
      "state": { "level": 1, "durability": 100, "xp": 0 }
    }
  }
}
```

---

### JSON Schema (Normative)

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://radiant.org/schemas/game_item_v1.json",
  "title": "Game Item Profile v1",
  "type": "object",
  "required": ["namespace", "schema", "data"],
  "properties": {
    "namespace": { "const": "rxd.game" },
    "schema": { "const": "game_item_v1" },
    "data": {
      "type": "object",
      "required": ["base"],
      "properties": {
        "base": {
          "type": "object",
          "required": [
            "item_id",
            "slot",
            "rarity",
            "tags",
            "stats",
            "stackable"
          ],
          "properties": {
            "item_id": { "type": "string", "maxLength": 64 },
            "slot": {
              "type": "string",
              "enum": [
                "weapon",
                "armor",
                "helmet",
                "boots",
                "gloves",
                "accessory",
                "consumable",
                "misc"
              ]
            },
            "rarity": {
              "type": "string",
              "enum": [
                "common",
                "uncommon",
                "rare",
                "epic",
                "legendary",
                "mythic"
              ]
            },
            "tags": {
              "type": "array",
              "items": { "type": "string", "maxLength": 32 },
              "maxItems": 16
            },
            "stats": {
              "type": "object",
              "additionalProperties": {
                "type": "integer",
                "minimum": -2147483648,
                "maximum": 2147483647
              }
            },
            "stackable": { "type": "boolean" },
            "effects": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["effect_id", "type"],
                "properties": {
                  "effect_id": { "type": "string" },
                  "type": {
                    "type": "string",
                    "enum": ["damage", "heal", "buff", "debuff", "special"]
                  },
                  "value": { "type": "integer" },
                  "duration": { "type": "integer" },
                  "target": {
                    "type": "string",
                    "enum": ["self", "enemy", "ally", "aoe"]
                  }
                }
              }
            },
            "equip_rules": {
              "type": "object",
              "properties": {
                "min_level": { "type": "integer", "minimum": 0 },
                "class_restrict": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "unique_equipped": { "type": "boolean" },
                "bind_on_equip": { "type": "boolean" }
              }
            }
          }
        },
        "state": {
          "type": "object",
          "properties": {
            "level": { "type": "integer", "minimum": 0 },
            "durability": { "type": "integer", "minimum": 0 },
            "xp": { "type": "integer", "minimum": 0 },
            "bound_to": { "type": "string" }
          }
        }
      }
    }
  }
}
```

## Backwards Compatibility

This profile is an extension of Glyph v2 and does not affect existing Glyphs. Indexers that do not recognize the `game_item_v1` schema will still index the Glyph normally.

## Rationale

The schema is designed to cover common game item patterns while remaining flexible enough for diverse game mechanics. Required fields ensure minimum interoperability; optional fields allow game-specific customization.

## Reference Implementation

See REP-3004 for indexer implementation guide.

## Security Considerations

- `stats` values are bounded to int32 to prevent overflow attacks
- `tags` and `item_id` have length limits to prevent abuse
- Mutable state changes require controller authorization per REP-3001

## Copyright

This document is licensed under the MIT License.
